!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.SupportChat=e():t.SupportChat=e()}("undefined"!=typeof self?self:this,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="https://npm-assets.fiverrcdn.com/assets/@fiverr-private/support_chat/",n(n.s="tjUo")}({"/9aa":function(t,e,n){var r=n("NykK"),o=n("ExA7");t.exports=function(t){return"symbol"==typeof t||o(t)&&"[object Symbol]"==r(t)}},"6BTq":function(t,e,n){"use strict";(function(t){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(e,"a",(function(){return o}));var o="object"===("undefined"==typeof window?"undefined":r(window))&&window.window===window&&window||"object"===(void 0===t?"undefined":r(t))&&t.global===t&&t||"object"===("undefined"==typeof self?"undefined":r(self))&&self.self===self&&self}).call(this,n("yLpj"))},AP2z:function(t,e,n){var r=n("nmnc"),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,c=r?r.toStringTag:void 0;t.exports=function(t){var e=i.call(t,c),n=t[c];try{t[c]=void 0;var r=!0}catch(t){}var o=a.call(t);return r&&(e?t[c]=n:delete t[c]),o}},DzJC:function(t,e,n){var r=n("sEfC"),o=n("GoyQ");t.exports=function(t,e,n){var i=!0,a=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return o(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),r(t,e,{leading:i,maxWait:e,trailing:a})}},ExA7:function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},GoyQ:function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},KfNM:function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},Kz5y:function(t,e,n){var r=n("WFqU"),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();t.exports=i},NykK:function(t,e,n){var r=n("nmnc"),o=n("AP2z"),i=n("KfNM"),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?o(t):i(t)}},QIyF:function(t,e,n){var r=n("Kz5y");t.exports=function(){return r.Date.now()}},WFqU:function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n("yLpj"))},nmnc:function(t,e,n){var r=n("Kz5y").Symbol;t.exports=r},sEfC:function(t,e,n){var r=n("GoyQ"),o=n("QIyF"),i=n("tLB3"),a=Math.max,c=Math.min;t.exports=function(t,e,n){var u,f,s,d,l,p,y=0,w=!1,b=!1,h=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function m(e){var n=u,r=f;return u=f=void 0,y=e,d=t.apply(r,n)}function v(t){return y=t,l=setTimeout(O,e),w?m(t):d}function g(t){var n=t-p;return void 0===p||n>=e||n<0||b&&t-y>=s}function O(){var t=o();if(g(t))return j(t);l=setTimeout(O,function(t){var n=e-(t-p);return b?c(n,s-(t-y)):n}(t))}function j(t){return l=void 0,h&&u?m(t):(u=f=void 0,d)}function E(){var t=o(),n=g(t);if(u=arguments,f=this,p=t,n){if(void 0===l)return v(p);if(b)return clearTimeout(l),l=setTimeout(O,e),m(p)}return void 0===l&&(l=setTimeout(O,e)),d}return e=i(e)||0,r(n)&&(w=!!n.leading,s=(b="maxWait"in n)?a(i(n.maxWait)||0,e):s,h="trailing"in n?!!n.trailing:h),E.cancel=function(){void 0!==l&&clearTimeout(l),y=0,u=p=f=l=void 0},E.flush=function(){return void 0===l?d:j(o())},E}},tLB3:function(t,e,n){var r=n("GoyQ"),o=n("/9aa"),i=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,f=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var n=c.test(t);return n||u.test(t)?f(t.slice(2),n?2:8):a.test(t)?NaN:+t}},tjUo:function(t,e,n){"use strict";n.r(e);var r="CACHED",o="LIVE",i={OPEN:"OPEN",SHOWN:"SHOWN",HIDDEN:"HIDDEN",EMPTY:"EMPTY"},a="supportchat:init",c="SUPPORT.CHAT.STATE",u=n("DzJC"),f=n.n(u),s=function(t){return{customEventName:"chat_is_closed",properties:{chat_id:t}}},d=function(t,e){return{customEventName:"chat_account_status_changed",properties:{status:t,chat_id:e}}},l=function(t){if(!window.appboy)throw new Error("No Braze appboy");if(!t.customEventName)throw new Error("No payload custom event name");window.appboy.logCustomEvent(t.customEventName,t.properties)};function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){w(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function w(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b(){window.zE("webWidget","open")}function h(t){var e=t.tags,n=t.department;window.zESettings={launcher:{label:{"*":"Business Chat"},chatLabel:{"*":"Business Chat"}},webWidget:{zIndex:9999999999,offset:{horizontal:0,vertical:"2px"},chat:{tags:e,departments:{enabled:[n],select:n}},authenticate:{chat:{jwtFn:function(t){window.axios.get("/zendesk/chat_authentication").then((function(t){return t.data})).then((function(e){console.log("Successfuly authenticated into Zendesk chat"),t(e.jwt)}))}}}}}}function m(t){var e,n=t.tags,r=t.department,o=t.state,a=t.chat_id;!function(t){switch(t){case i.OPEN:case i.SHOWN:return window.zE("webWidget","show");default:window.zE("webWidget","hide")}}(o),function t(){var e=document.getElementById("launcher");if(!e)return setTimeout((function(){10!==t.retries&&(t.retries=(t.retries||0)+1,t())}),1e3);setTimeout((function(){return v(e)}),500),document.onscroll=f()((function(){return v(e)}),50)}(),(e=document.createElement("style")).innerHTML="\n        #launcher {\n            margin: 10px !important;\n            z-index: 3 !important;\n        }\n    ",document.head.appendChild(e),function t(){var e=document.getElementById("launcher");if(!e)return setTimeout((function(){10!==t.retries&&(t.retries=(t.retries||0)+1,t())}),1e3);var n=e.contentDocument.createElement("style");n.innerHTML="\n        button {\n            padding: 1rem !important;\n        }\n        button span:nth-child(1) {\n            padding-right: 0 !important;\n        }\n        button span:nth-child(2) {\n            display: none !important;\n        }\n    ",e.contentDocument.head.appendChild(n)}(),setInterval((function(){if(window.zE("webWidget:get","chat:isChatting")){var t=D();if(function(t){if(!t||!t.createdAt)return!0;var e=new Date(t.createdAt),n=new Date(e.getTime()+864e5-9e5);return new Date>n}(t)){var e=new Date(Date.now()-864e5+9e5);A(y(y({},t),{},{createdAt:e}))}}}),6e4),window.AnswersWidget&&window.AnswersWidget.hide(),window.zE("webWidget:on","chat:departmentStatus",(function(t){console.info("Department ".concat(t.name,", ").concat(t.id," is ").concat(t.status)),t.name===r&&"online"===t.status&&(window.zE("webWidget","chat:addTags",n),function(t){switch(t){case i.OPEN:window.zE("webWidget","show"),setTimeout((function(){b()}),500);break;case i.SHOWN:window.zE("webWidget","show");break;case i.HIDDEN:default:window.zE("webWidget","hide")}}(o))})),window.zE("webWidget:on","chat:connected",(function(){console.log("Successfully connected to Zendesk Chat!")})),window.zE("webWidget:on","chat:end",(function(){!function(){var t=D(),e=new Date(Date.now()-864e5+6e4);A(y(y({},t),{},{state:i.SHOWN,createdAt:e}))}(),l(s(a))})),window.zE("webWidget:on","close",(function(){A(y(y({},D()),{},{state:i.SHOWN}))})),window.zE("webWidget:on","chat:status",(function(t){return function(t,e){return l(d(t,e))}(t,a)}))}var v=function(t){window.innerHeight+window.scrollY>document.body.clientHeight-20?t.classList.add("invisible-element"):t.classList.remove("invisible-element")};function g(t){t&&"EMPTY"!==t.state&&t.chat_id&&t.department&&(h(t),function(t){var e=document.createElement("script");e.onload=t,e.type="application/javascript",e.id="ze-snippet",e.src="https://static.zdassets.com/ekr/snippet.js?key=dbd69753-3b8a-468d-b704-8a1ed2887899&cors=1";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)}((function(){return m(t)})))}function O(t){return function(t){if(Array.isArray(t))return j(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return j(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){S(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function S(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function D(){var t=window.localStorage.getItem(c);if(t)try{return JSON.parse(t)}catch(t){window.localStorage.removeItem(c)}}function A(t){var e=JSON.stringify(P(P({},t),{},{createdAt:t.createdAt||new Date}));return window.localStorage.setItem(c,e)}function x(){return window.axios.get("/zendesk/chat/state").then((function(t){return t.data})).then((function(t){if(t){var e=P(P({},t),{},{tags:[].concat(O(t.tags||[]),["user_type-".concat(window.dataLayer&&window.dataLayer[0].user_type)])});return A(e),e}})).catch((function(t){throw t}))}function T(){var t=D();return function(t){if(!t)return!0;var e=new Date(t),n=new Date(e.getTime()+864e5);return new Date>n}(t&&t.createdAt)?x().then((function(t){if(t)return g(t)})):g(t)}var _=function(t){switch(t){case o:return"Live flow TBD";case r:default:return T()}},N=n("6BTq");function z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var W=Symbol(),k=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this[W]=new Map}var e,n,r;return e=t,(n=[{key:"on",value:function(t,e){var n=this[W].get(t);n||(this[W].set(t,new Set),n=this[W].get(t)),n.add(e)}},{key:"once",value:function(t,e){var n=this,r=function r(){n.off(t,r),e.apply(void 0,arguments)};this.on(t,r)}},{key:"one",value:function(t,e){this.has(t)||this.on(t,e)}},{key:"has",value:function(t){return this[W].has(t)}},{key:"off",value:function(t,e){if(this[W].has(t))if(void 0!==e){var n=this[W].get(t);n.delete(e),0===n.size&&this[W].delete(t)}else this[W].delete(t)}},{key:"emit",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var o=this[W].get(t);o&&o.forEach((function(t){t.apply(void 0,n)}))}},{key:"deferred",value:function(t){for(var e=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return Promise.resolve().then((function(){e.emit.apply(e,[t].concat(r))}))}}])&&z(e.prototype,n),r&&z(e,r),t}(),C=Symbol.for("globalEventBus"),I=N.a[C]=N.a[C]||new k,L=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];I.deferred("OBS::BIG_QUERY",{events:e})};function M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function H(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?M(Object(n),!0).forEach((function(e){B(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function B(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var U=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e="reason_";return t.filter((function(t){return-1!==t.indexOf(e)})).reduce((function(t,n){return n.slice(e.length)}),"")};function F(t){return function(t){if(Array.isArray(t))return K(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return K(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Q(Object(n),!0).forEach((function(e){$(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function G(t){var e=t.createdAt?t.createdAt:new Date(Date.now()-864e5+18e5),n=Y(Y({},t),{},{createdAt:e});A(n),g(n)}function q(t){!function(t){if(!t)throw new Error('"detail" payload is not defined for event. Please, fire event like new CustomEvent("supportchat:init", { detail: { ...your properties } })');if(!t.chat_id)throw new Error('Missing param "chat_id" needed to initiate support chat');if(!t.department)throw new Error('Missing param "department" needed to initiate support chat');if(!t.tags)throw new Error('Missing param "tags" needed to initiate support chat');if(!t.state)throw new Error('Missing param "state" needed to initiate support chat');if(t.state&&!Object.values(i).find((function(e){return e===t.state})))throw new Error('"state" property has to have one of these values: '.concat(Object.values(i).toString()));if(t.createdAt&&!(t.createdAt instanceof Date))throw new Error('"createdAt" param has to be of type Date')}(t.detail);var e=t.detail,n=e.chat_id,r=e.department,o=e.tags,a=e.state,c=e.createdAt,u=[].concat(F(o),["user_type-".concat(window.dataLayer&&window.dataLayer[0].user_type)]),f={chat_id:n,department:r,tags:u,state:a,createdAt:c},s=D();!function(t){var e=H(H({},{group:"user_actions",platform:"web",user:{id:window.dataLayer&&window.dataLayer.length&&window.dataLayer[0]&&window.dataLayer[0].user_id},feature:{name:"support_chat"},reason:"support_chat_to_vibs",sub_group:"website_actions",action:{type:"click"},domain:{name:"buyers"},publisher:{domain:"buyers",sub_domain:"grizzlies"}}),{},{type:"chat_triggered",reason:U(t)});L(e)}(u),s?s&&s.state===i.EMPTY?G(f):s&&a===i.OPEN&&b():G(f)}window.addEventListener(a,q),_(window.SUPPORT_CHAT_TYPE)},yLpj:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n}})}));